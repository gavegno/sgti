-- Database: sgti

-- DROP DATABASE sgti;

CREATE DATABASE sgti
  WITH OWNER = root
       ENCODING = 'UTF8'
       TABLESPACE = pg_default
       LC_COLLATE = 'en_US.UTF-8'
       LC_CTYPE = 'en_US.UTF-8'
       CONNECTION LIMIT = -1;

-- Table: tipohora

-- DROP TABLE tipohora;

CREATE TABLE tipohora
(
  id serial NOT NULL,
  tipo character varying NOT NULL,
  CONSTRAINT "id_primaryKey" PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE tipohora
  OWNER TO root;

-- Table: usuario

-- DROP TABLE usuario;

CREATE TABLE usuario
(
  id character varying NOT NULL,
  nombre character varying NOT NULL,
  apellido character varying NOT NULL,
  contrasena character varying NOT NULL,
  email character varying,
  telefono character varying,
  tipo character varying,
  activo boolean,
  CONSTRAINT usuario_id_primarikey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE usuario
  OWNER TO root;

-- Table: usuario_tipohora

-- DROP TABLE usuario_tipohora;

CREATE TABLE usuario_tipohora
(
  id_tipohora integer NOT NULL,
  id_usuario character varying NOT NULL,
  CONSTRAINT "tipohora_usuario_primaryKey" PRIMARY KEY (id_tipohora , id_usuario ),
  CONSTRAINT "id_tipohora_foreignKey" FOREIGN KEY (id_tipohora)
      REFERENCES tipohora (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT "id_usuario_foreingKey" FOREIGN KEY (id_usuario)
      REFERENCES usuario (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE usuario_tipohora
  OWNER TO root;

-- Table: cliente

-- DROP TABLE cliente;

CREATE TABLE cliente
(
  id serial NOT NULL,
  nombre character varying NOT NULL,
  direccion character varying,
  telefono character varying,
  activo boolean NOT NULL,
  CONSTRAINT "cliente_primaryKey" PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE cliente
  OWNER TO root;

-- Table: configuracion

-- DROP TABLE configuracion;

CREATE TABLE configuracion
(
  id serial NOT NULL,
  fechainicio date,
  fechafin date,
  renovacion character varying,
  periodorenovacion integer,
  tipocontrato character varying,
  computospaquete integer,
  periodovalidezmes integer,
  periodovalidezdia integer,
  acumulacion boolean,
  periodoacumulacion integer,
  frecuenciainforme integer,
  frecuenciafacturacion integer,
  frecuenciacomputosextra integer,
  tiemporespuesta character varying,
  id_horariolaboral character varying,
  id_contrato character varying,
  CONSTRAINT "configuracion_primaryKey" PRIMARY KEY (id ),
  CONSTRAINT "configuracion_contrato_foreignKey" FOREIGN KEY (id_contrato)
      REFERENCES contrato (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE configuracion
  OWNER TO root;

-- Index: "fki_configuracion_contrato_foreignKey"

-- DROP INDEX "fki_configuracion_contrato_foreignKey";

CREATE INDEX "fki_configuracion_contrato_foreignKey"
  ON configuracion
  USING btree
  (id_contrato COLLATE pg_catalog."default" );

-- Table: horario

-- DROP TABLE horario;

CREATE TABLE horario
(
  id character varying NOT NULL,
  nombredia character varying NOT NULL,
  horadesde character varying,
  horahasta character varying,
  idcontrato character varying,
  CONSTRAINT "horario_primaryKey" PRIMARY KEY (nombredia , id ),
  CONSTRAINT "horario_contrato_foreignKey" FOREIGN KEY (idcontrato)
      REFERENCES contrato (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE horario
  OWNER TO root;

-- Index: "fki_horario_contrato_foreignKey"

-- DROP INDEX "fki_horario_contrato_foreignKey";

CREATE INDEX "fki_horario_contrato_foreignKey"
  ON horario
  USING btree
  (idcontrato COLLATE pg_catalog."default" );

-- Table: precio

-- DROP TABLE precio;

CREATE TABLE precio
(
  precio double precision NOT NULL,
  fechadesde date NOT NULL,
  fechahasta date NOT NULL,
  idcontrato character varying NOT NULL,
  CONSTRAINT "precio_primaryKey" PRIMARY KEY (precio , fechadesde , fechahasta , idcontrato ),
  CONSTRAINT "precio_contrato_foreignKey" FOREIGN KEY (idcontrato)
      REFERENCES contrato (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE precio
  OWNER TO root;

-- Index: "fki_precio_contrato_foreignKey"

-- DROP INDEX "fki_precio_contrato_foreignKey";

CREATE INDEX "fki_precio_contrato_foreignKey"
  ON precio
  USING btree
  (idcontrato COLLATE pg_catalog."default" );

- Table: contrato_tipohora

-- DROP TABLE contrato_tipohora;

CREATE TABLE contrato_tipohora
(
  idcontrato character varying NOT NULL,
  idtipohora integer NOT NULL,
  computos integer NOT NULL,
  CONSTRAINT "contrato_tipohora_primeryKey" PRIMARY KEY (computos , idcontrato , idtipohora ),
  CONSTRAINT "idTipohora_foreignKey" FOREIGN KEY (idtipohora)
      REFERENCES tipohora (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT "tipohora_contrato_foreignKey" FOREIGN KEY (idcontrato)
      REFERENCES contrato (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE contrato_tipohora
  OWNER TO root;

-- Index: "fki_tipohora_contrato_foreignKey"

-- DROP INDEX "fki_tipohora_contrato_foreignKey";

CREATE INDEX "fki_tipohora_contrato_foreignKey"
  ON contrato_tipohora
  USING btree
  (idcontrato COLLATE pg_catalog."default" );

-- Table: contrato

-- DROP TABLE contrato;

CREATE TABLE contrato
(
  id character varying NOT NULL,
  cliente integer,
  contraparte character varying,
  CONSTRAINT "contrato_primeryKey" PRIMARY KEY (id ),
  CONSTRAINT "contrato_cliente_foreignKey" FOREIGN KEY (cliente)
      REFERENCES cliente (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT "contrato_contraparte_foreignKey" FOREIGN KEY (contraparte)
      REFERENCES usuario (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE contrato
  OWNER TO root;

-- Index: "fki_contrato_cliente_foreignKey"

-- DROP INDEX "fki_contrato_cliente_foreignKey";

CREATE INDEX "fki_contrato_cliente_foreignKey"
  ON contrato
  USING btree
  (cliente );

-- Index: "fki_contrato_contraparte_foreignKey"

-- DROP INDEX "fki_contrato_contraparte_foreignKey";

CREATE INDEX "fki_contrato_contraparte_foreignKey"
  ON contrato
  USING btree
  (contraparte COLLATE pg_catalog."default" );


